<!DOCTYPE html>
<html>
<head>
  <title>Breakfast Pack Open</title>
  <style>
    body {
      background-color: rgb(198, 101, 57);
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
      font-family: sans-serif;
    }

    .pack-wrapper {
      position: relative;
      width: 300px;
      height: 300px;
      cursor: pointer;
      z-index: 10;
    }

    .half {
      position: absolute;
      width: 100%;
      height: 50%;
      background-image: url('https://ac.blooket.com/dashclassic/assets/Breakfast_Pack-Dbk28uOc.png');
      background-size: cover;
      background-repeat: no-repeat;
      transition: transform 0.6s ease, opacity 0.6s ease;
    }

    .top-half {
      background-position: top;
      top: 0;
    }

    .bottom-half {
      background-position: bottom;
      bottom: 0;
    }

    .torn .top-half {
      transform: translateY(-150%) rotate(-15deg);
      opacity: 0;
    }

    .torn .bottom-half {
      transform: translateY(150%) rotate(15deg);
      opacity: 0;
    }

    #result {
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.1);
      font-size: 4.5rem;
      color: white;
      z-index: 15;
      transition: transform 0.3s ease;
    }

    #result img {
      width: 150px;
      height: auto;
    }

    .confetti-piece {
      position: fixed;
      width: 12px;
      height: 12px;
      opacity: 0.8;
      pointer-events: none;
      z-index: 20;
      border-radius: 2px;
    }
  </style>
</head>
<body>
  <div class="pack-wrapper" id="pack">
    <div class="half top-half"></div>
    <div class="half bottom-half"></div>
  </div>

  <div id="result"></div>

  <script>
const breakfastPack = {
  blooks: [
    { name: "https://ac.blooket.com/marketassets/blooks/toast.svg", chance: 12.3168, rarity: 'uncommon' },
    { name: "https://ac.blooket.com/marketassets/blooks/cereal.svg", chance: 12.3168, rarity: 'uncommon' },
    { name: "https://ac.blooket.com/marketassets/blooks/yogurt.svg", chance: 12.3168, rarity: 'uncommon' },
    { name: "https://ac.blooket.com/marketassets/blooks/breakfastcombo.svg", chance: 12.3168, rarity: 'uncommon' },
    { name: "https://ac.blooket.com/marketassets/blooks/orangejuice.svg", chance: 12.3168, rarity: 'uncommon' },
    { name: "https://ac.blooket.com/marketassets/blooks/milk.svg", chance: 12.316, rarity: 'uncommon' },
    { name: "https://ac.blooket.com/marketassets/blooks/waffle.svg", chance: 9, rarity: 'rare' },
    { name: "https://ac.blooket.com/marketassets/blooks/pancakes.svg", chance: 9, rarity: 'rare' },
    { name: "https://ac.blooket.com/marketassets/blooks/frenchtoast.svg", chance: 5, rarity: 'epic' },
    { name: "https://ac.blooket.com/marketassets/blooks/pizza.svg", chance: 2, rarity: 'legendary' },
    { name: "https://ac.blooket.com/marketassets/blooks/sandwich.svg", chance: 1, rarity: 'legendary' },
    { name: "https://blacket.org/content/blooks/Chocolate%20Milk.webp", chance: 0.1, rarity: 'chroma' }
  ]
};

function getRandomBlook() {
  const rand = Math.random() * 100;
  let total = 0;
  for (const blook of breakfastPack.blooks) {
    total += blook.chance;
    if (rand <= total) return blook;
  }
  return null;
}

function spawnConfetti(rarity, blookElement) {
  const colors = {
    uncommon: '#00cc66',
    rare: '#3399ff',
    epic: '#9933ff',
    legendary: '#ffaa00',
    chroma: '#ff66cc'
  };

  const amount = {
    uncommon: 40,
    rare: 60,
    epic: 80,
    legendary: 100,
    chroma: 120
  };

  for (let i = 0; i < amount[rarity]; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.backgroundColor = colors[rarity];
    confetti.style.position = 'fixed';
    confetti.style.width = '8px';
    confetti.style.height = '8px';
    confetti.style.borderRadius = '2px';
    confetti.style.zIndex = 9999;

    let startX, startY, velocityX, velocityY, gravity = true;

    if (rarity === 'uncommon') {
      const rect = blookElement.getBoundingClientRect();
      startX = rect.left + rect.width / 2 + (Math.random() - 0.5) * 60;
      startY = rect.top + 10;
      velocityX = (Math.random() - 0.5) * 2;
      velocityY = -Math.random() * 4 - 3;
    } else if (rarity === 'rare') {
      const fromLeft = i % 2 === 0;
      startX = fromLeft ? 30 : window.innerWidth - 30;
      startY = window.innerHeight - 30;
      velocityX = fromLeft ? Math.random() * 9 + 2 : -Math.random() * 9 - 2;
      velocityY = -Math.random() * 9 - 4;
      gravity = false; // delay gravity
    } else if (rarity === 'epic') {
      const fromLeft = i % 2 === 0;
      startX = fromLeft ? 0 : window.innerWidth;
      startY = Math.random() * window.innerHeight;
      velocityX = fromLeft ? Math.random() * 20 + 10 : -Math.random() * 20 - 10;
      velocityY = (Math.random() - 0.5) * 6;
      gravity = false;
    } else if (rarity === 'legendary') {
      startX = Math.random() * window.innerWidth;
      startY = -20;
      velocityX = (Math.random() - 0.5) * 2;
      velocityY = Math.random() * 4 + 2;
    } else if (rarity === 'chroma') {
      const fromX = i % 2 === 0 ? 0 : window.innerWidth;
      const fromY = i % 4 < 2 ? 0 : window.innerHeight;
      startX = fromX;
      startY = fromY;
      velocityX = (Math.random() - 0.5) * 25;
      velocityY = (Math.random() - 0.5) * 25;
      gravity = false;
    }

    confetti.style.left = `${startX}px`;
    confetti.style.top = `${startY}px`;
    document.body.appendChild(confetti);

    let currentX = startX;
    let currentY = startY;

    const animation = setInterval(() => {
      currentX += velocityX;
      currentY += velocityY;
      velocityY += gravity ? 0.2 : 0; // simple gravity

      confetti.style.left = `${currentX}px`;
      confetti.style.top = `${currentY}px`;

      if (
        currentX < -50 || currentX > window.innerWidth + 50 ||
        currentY > window.innerHeight + 50
      ) {
        clearInterval(animation);
        confetti.remove();
      }
    }, 16);

    // rare: add gravity after short delay
    if (rarity === 'rare') {
      setTimeout(() => {
        gravity = true;
      }, 150); // allow confetti to shoot first
    }
  }

let clickCount = 0;

document.getElementById('pack').addEventListener('click', function () {
  if (clickCount === 0) {
    this.classList.add('torn');
    const blook = getRandomBlook();
    if (blook) {
      const result = document.getElementById('result');
      const img = document.createElement('img');
      img.src = blook.name;
      result.appendChild(img);
      setTimeout(() => {
        result.style.transform = 'translate(-50%, -50%) scale(1)';
        const rect = result.getBoundingClientRect();
        const originX = rect.left + rect.width / 2;
        const originY = rect.top + rect.height / 2;
        spawnConfetti(blook.rarity, originX, originY);
      }, 200);
    }
    clickCount++;
  } else {
    window.location.href = "index.html";
  }
});
</script>
</body>
</html>
